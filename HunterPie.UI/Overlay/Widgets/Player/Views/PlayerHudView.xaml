<arch:View x:Class="HunterPie.UI.Overlay.Widgets.Player.Views.PlayerHudView"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
           xmlns:arch="clr-namespace:HunterPie.UI.Architecture"
           xmlns:overlay="clr-namespace:HunterPie.UI.Overlay.Controls"
           xmlns:local="clr-namespace:HunterPie.UI.Overlay.Widgets.Player.Views"
           xmlns:converters="clr-namespace:HunterPie.UI.Architecture.Converters"
           xmlns:viewmodels="clr-namespace:HunterPie.UI.Overlay.Widgets.Player.ViewModels"
           x:TypeArguments="viewmodels:PlayerHudViewModel"
           d:DataContext="{d:DesignInstance Type=viewmodels:PlayerHudViewModel}"
           mc:Ignorable="d"
           Width="800">
    <UserControl.Resources>
        <converters:WeaponToIconConverter x:Key="WeaponToIconConverter"/>

        <LinearGradientBrush x:Key="WIDGET_PLAYER_HEALTH_FOREGROUND" EndPoint="1,1" StartPoint="0,1">
            <GradientStop Color="#3ecfa6"/>
            <GradientStop Color="#3ecf87" Offset="1"/>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="WIDGET_PLAYER_STAMINA_FOREGROUND" EndPoint="1,1" StartPoint="0,1">
            <GradientStop Color="#FFFF9A36" Offset="1"/>
            <GradientStop Color="#FFFF2E00" Offset="0"/>
        </LinearGradientBrush>


    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="80"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Player name -->
        <TextBlock FontFamily="{StaticResource HUNTERPIE_DEFAULT_FONT}"
                   Foreground="{StaticResource WHITE_100}"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left"
                   Margin="5,5,0,0" 
                   Grid.Column="1">
            <Run Text="Lv."
                 Foreground="{StaticResource WHITE_400}"
                 FontSize="13"/>
            <Run d:Text="55"
                 Text="{Binding Level, Mode=OneWay}"
                 Foreground="{StaticResource WHITE_400}"
                 FontSize="13"/>
            <Run d:Text="Lyss"
                 Text="{Binding Name, Mode=OneWay}"
                 FontSize="16"
                 FontWeight="Medium"/>
            <TextBlock.Effect>
                <DropShadowEffect Color="Black"
                                      BlurRadius="2" 
                                      ShadowDepth="0"/>
            </TextBlock.Effect>
        </TextBlock>

        <!-- Health bar -->
        <Grid VerticalAlignment="Top"
              Margin="0,30,10,0" 
              Grid.Column="1" 
              Grid.RowSpan="2">
            <Rectangle VerticalAlignment="Top"
                       Height="15"
                       Stroke="{StaticResource WHITE_100}"
                       StrokeThickness="2" 
                       Fill="{StaticResource WHITE_300}"
                       Opacity="0.5"
                       HorizontalAlignment="Left"
                       Width="700">
                <Rectangle.RenderTransform>
                    <TransformGroup>
                        <SkewTransform AngleX="45"/>
                    </TransformGroup>
                </Rectangle.RenderTransform>
            </Rectangle>

            <overlay:Bar Foreground="{StaticResource RED_LIGHT_50}"
                         Background="{StaticResource GRAY_500}"
                         Height="15"
                         MaxValue="150"
                         Value="50"
                         HorizontalAlignment="Left"
                         BorderThickness="2" 
                         RenderTransformOrigin="0.5,0.5"
                         VerticalAlignment="Top"
                         Width="500">
                <overlay:Bar.RenderTransform>
                    <TransformGroup>
                        <SkewTransform AngleX="45"/>
                    </TransformGroup>
                </overlay:Bar.RenderTransform>
            </overlay:Bar>
            <overlay:Bar Foreground="{StaticResource WIDGET_PLAYER_HEALTH_FOREGROUND}"
                         Background="Transparent"
                         Height="15"
                         d:MaxValue="150"
                         d:Value="30"
                         MaxValue="{Binding MaxHealth, Mode=OneWay}"
                         Value="{Binding Health, Mode=OneWay}"
                         BorderThickness="2" 
                         HorizontalAlignment="Left"
                         RenderTransformOrigin="0.5,0.5"
                         VerticalAlignment="Top"
                         BorderBrush="{StaticResource GRAY_300}"
                         Width="500">
                <overlay:Bar.RenderTransform>
                    <TransformGroup>
                        <SkewTransform AngleX="45"/>
                    </TransformGroup>
                </overlay:Bar.RenderTransform>
            </overlay:Bar>

            <!-- Stamina bar -->
            <overlay:Bar Foreground="{StaticResource WIDGET_PLAYER_STAMINA_FOREGROUND}"
                     BorderBrush="{StaticResource GRAY_200}"
                     Background="#B2181A1B"
                     Height="8"
                     d:MaxValue="2000"
                     d:Value="550"
                     MaxValue="{Binding MaxStamina, Mode=OneWay}"
                     Value="{Binding Stamina, Mode=OneWay}"
                     BorderThickness="2" 
                     RenderTransformOrigin="0.5,0.5"
                     VerticalAlignment="Top"
                     Margin="0,15,0,0">
                <overlay:Bar.RenderTransform>
                    <TransformGroup>
                        <SkewTransform AngleX="-45"/>
                    </TransformGroup>
                </overlay:Bar.RenderTransform>
            </overlay:Bar>
        </Grid>


        <TextBlock FontFamily="{StaticResource HUNTERPIE_DEFAULT_FONT}"
                   Foreground="{StaticResource WHITE_50}"
                   VerticalAlignment="Top"
                   HorizontalAlignment="Right"
                   Margin="0,12,18,0"
                   FontSize="15" 
                   Grid.Column="1">
            <Run d:Text="30"
                 Text="{Binding Health, Mode=OneWay, StringFormat='\{0:F0}'}"/><!--
         --><Run d:Text="/150"
                 Text="{Binding MaxHealth, Mode=OneWay, StringFormat='/\{0:F0}'}"
                 FontWeight="Bold"/>
            <Run d:Text="(200)"
                 Text="{Binding MaxExtendableHealth, Mode=OneWay, StringFormat='(\{0:F0})'}"
                 FontWeight="Medium"
                 Foreground="{StaticResource WHITE_200}"/>
            <TextBlock.Effect>
                <DropShadowEffect Color="Black"
                                  BlurRadius="2" 
                                  ShadowDepth="0"/>
            </TextBlock.Effect>
        </TextBlock>

        
        <TextBlock FontFamily="{StaticResource HUNTERPIE_DEFAULT_FONT}"
                   Foreground="{StaticResource WHITE_50}"
                   VerticalAlignment="Top"
                   HorizontalAlignment="Right"
                   Margin="0,25,15,0"
                   FontSize="15" 
                   Grid.Column="1" 
                   Grid.Row="1">
            <Run d:Text="550"
                 Text="{Binding Stamina, Mode=OneWay, StringFormat='\{0:F0}'}"/><!--
         --><Run d:Text="/2000"
                 Text="{Binding MaxStamina, Mode=OneWay, StringFormat='/\{0:F0}'}"
                 FontWeight="Bold"/>
            <TextBlock.Effect>
                <DropShadowEffect Color="Black"
                                      BlurRadius="4" 
                                      ShadowDepth="0"/>
            </TextBlock.Effect>
        </TextBlock>

        <!-- Player weapon -->
        <Grid Width="{Binding ActualHeight, Mode=OneWay, RelativeSource={RelativeSource Self}}"
              VerticalAlignment="Top"
              HorizontalAlignment="Left"
              Margin="15,15,0,0"
              Height="60"
              Grid.ColumnSpan="2"
              Grid.RowSpan="2">
            <Rectangle StrokeThickness="1.5"
                       RenderTransformOrigin="0.5,0.5">
                <Rectangle.Stroke>
                    <LinearGradientBrush EndPoint="1,1" StartPoint="0.5,0.5">
                        <GradientStop Color="#FF2F3136" Offset="0"/>
                        <GradientStop Color="#FF2F303A" Offset="1"/>
                        <GradientStop Color="Black" Offset="0.476"/>
                        <GradientStop Color="#FF303030" Offset="0.202"/>
                    </LinearGradientBrush>
                </Rectangle.Stroke>
                <Rectangle.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#FF41444D"/>
                        <GradientStop Color="#FF121417" Offset="1"/>
                    </RadialGradientBrush>
                </Rectangle.Fill>
                <Rectangle.RenderTransform>
                    <TransformGroup>
                        <RotateTransform Angle="45"/>
                    </TransformGroup>
                </Rectangle.RenderTransform>
            </Rectangle>
            <Rectangle RenderTransformOrigin="0.5,0.5"
                       StrokeThickness="0.5"
                       Margin="5">
                <Rectangle.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#FF24252C" Offset="0.501"/>
                        <GradientStop Color="#FF18181F" Offset="1"/>
                    </RadialGradientBrush>
                </Rectangle.Fill>
                <Rectangle.Stroke>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#7F323232"/>
                        <GradientStop Color="#7F333347" Offset="1"/>
                    </LinearGradientBrush>
                </Rectangle.Stroke>
                <Rectangle.Effect>
                    <DropShadowEffect Color="#FF7B8795" 
                                      ShadowDepth="0" 
                                      BlurRadius="20"/>
                </Rectangle.Effect>
                <Rectangle.RenderTransform>
                    <TransformGroup>
                        <RotateTransform Angle="45"/>
                    </TransformGroup>
                </Rectangle.RenderTransform>
            </Rectangle>

            <Image d:Source="{StaticResource ICON_SWITCHAXE}"
                   Source="{Binding Weapon, Mode=OneWay, Converter={StaticResource WeaponToIconConverter}}"
                   HorizontalAlignment="Center"
                   RenderOptions.BitmapScalingMode="Fant"
                   Opacity="0.5"
                   Margin="15"
                   Stretch="Uniform">
                <Image.Effect>
                    <DropShadowEffect BlurRadius="5" 
                                      Color="#FF66696B" 
                                      ShadowDepth="0"/>
                </Image.Effect>
            </Image>
        </Grid>

        <!-- Weapon info -->
        <local:WeaponSharpnessView HorizontalAlignment="Left"
                                   Height="40"
                                   Width="100"
                                   VerticalAlignment="Bottom"
                                   Grid.Column="1"
                                   Grid.Row="1"
                                   Margin="0,25,0,0"/>
    </Grid>
</arch:View>
